/*!common/components/util/get-ie.js*/
;define("common/components/util/get-ie",["require","exports","module"],function(require,exports,module){module.exports={getIE:function(){for(var c=3,g=document.createElement("div"),a=g.getElementsByTagName("i");g.innerHTML="<!--[if gt IE "+ ++c+"]><i></i><![endif]-->",a[0];);return c>4?c:!1}}});
/*!common/components/dialog/main.js*/
;define("common/components/dialog/main",["require","exports","module","dep/jquery-colorbox/jquery.colorbox"],function(require,exports,module){require("dep/jquery-colorbox/jquery.colorbox");var c={body:"",loading:!1,okBtn:{has:!1,text:"确认",onClick:function(){$.colorbox.close()}},cancelBtn:{has:!1,text:"取消",onClick:function(){$.colorbox.close()}}};module.exports=function(a){a=$.extend(!0,{},c,a);var b;if(!a.html){var k=a.body?'<div class="dialog_body">'+a.body+"</div>":"",B=a.loading?'<div class="dialog_loading"></div>':"",g=a.okBtn&&a.okBtn.has&&a.okBtn.text?'<button class="dialog_btn dialog_ok" type="button">'+a.okBtn.text+"</button>":"",y=a.cancelBtn&&a.cancelBtn.has&&a.cancelBtn.text?'<button class="dialog_btn dialog_cancel" type="button">'+a.cancelBtn.text+"</button>":"",b=k+B+g+y;""!==b&&(a.html='<div class="dialog_container">'+b+"</div>")}a.loading&&(a.overlayClose=!1,a.closeButton=!1),$.colorbox(a),""!=b&&(a.okBtn&&a.okBtn.has&&a.okBtn.onClick&&$("#cboxContent .dialog_ok").click(a.okBtn.onClick),a.cancelBtn&&a.cancelBtn.has&&a.cancelBtn.onClick&&$("#cboxContent .dialog_cancel").click(a.cancelBtn.onClick))}});
/*!dep/jquery-placeholder/jquery-placeholder-2.3.0/jquery.placeholder.js*/
;!function(a){"function"==typeof define&&define.amd?define("dep/jquery-placeholder/jquery-placeholder-2.3.0/jquery.placeholder",["jquery"],a):a("object"==typeof module&&module.exports?require("jquery"):jQuery)}(function(a){function c(c){var h={},v=/^jQuery\d+$/;return a.each(c.attributes,function(i,a){a.specified&&!v.test(a.name)&&(h[a.name]=a.value)}),h}function h(c,h){var v=this,b=a(this);if(v.value===b.attr(w?"placeholder-x":"placeholder")&&b.hasClass(H.customClass))if(v.value="",b.removeClass(H.customClass),b.data("placeholder-password")){if(b=b.hide().nextAll('input[type="password"]:first').show().attr("id",b.removeAttr("id").data("placeholder-id")),c===!0)return b[0].value=h,h;b.focus()}else v==y()&&v.select()}function v(v){var y,b=this,C=a(this),j=b.id;if(!v||"blur"!==v.type||!C.hasClass(H.customClass))if(""===b.value){if("password"===b.type){if(!C.data("placeholder-textinput")){try{y=C.clone().prop({type:"text"})}catch(e){y=a("<input>").attr(a.extend(c(this),{type:"text"}))}y.removeAttr("name").data({"placeholder-enabled":!0,"placeholder-password":C,"placeholder-id":j}).bind("focus.placeholder",h),C.data({"placeholder-textinput":y,"placeholder-id":j}).before(y)}b.value="",C=C.removeAttr("id").hide().prevAll('input[type="text"]:first').attr("id",C.data("placeholder-id")).show()}else{var A=C.data("placeholder-password");A&&(A[0].value="",C.attr("id",C.data("placeholder-id")).show().nextAll('input[type="password"]:last').hide().removeAttr("id"))}C.addClass(H.customClass),C[0].value=C.attr(w?"placeholder-x":"placeholder")}else C.removeClass(H.customClass)}function y(){try{return document.activeElement}catch(a){}}var b,C,w=!1,j="[object OperaMini]"===Object.prototype.toString.call(window.operamini),A="placeholder"in document.createElement("input")&&!j&&!w,g="placeholder"in document.createElement("textarea")&&!j&&!w,E=a.valHooks,k=a.propHooks,H={};A&&g?(C=a.fn.placeholder=function(){return this},C.input=!0,C.textarea=!0):(C=a.fn.placeholder=function(c){var y={customClass:"placeholder"};return H=a.extend({},y,c),this.filter((A?"textarea":":input")+"["+(w?"placeholder-x":"placeholder")+"]").not("."+H.customClass).not(":radio, :checkbox, :hidden").bind({"focus.placeholder":h,"blur.placeholder":v}).data("placeholder-enabled",!0).trigger("blur.placeholder")},C.input=A,C.textarea=g,b={get:function(c){var h=a(c),v=h.data("placeholder-password");return v?v[0].value:h.data("placeholder-enabled")&&h.hasClass(H.customClass)?"":c.value},set:function(c,b){var C,w,j=a(c);return""!==b&&(C=j.data("placeholder-textinput"),w=j.data("placeholder-password"),C?(h.call(C[0],!0,b)||(c.value=b),C[0].value=b):w&&(h.call(c,!0,b)||(w[0].value=b),c.value=b)),j.data("placeholder-enabled")?(""===b?(c.value=b,c!=y()&&v.call(c)):(j.hasClass(H.customClass)&&h.call(c),c.value=b),j):(c.value=b,j)}},A||(E.input=b,k.value=b),g||(E.textarea=b,k.value=b),a(function(){a(document).delegate("form","submit.placeholder",function(){var c=a("."+H.customClass,this).each(function(){h.call(this,!0,"")});setTimeout(function(){c.each(v)},10)})}),a(window).bind("beforeunload.placeholder",function(){var c=!0;try{"javascript:void(0)"===document.activeElement.toString()&&(c=!1)}catch(h){}c&&a("."+H.customClass).each(function(){this.value=""})}))});
/*!common/components/editor/main.js*/
;define("common/components/editor/main",["require","exports","module","common/components/util/get-ie"],function(require){function a(a,c){this.$textarea=$(a),this.opts=c,this._IE=h.getIE()}var h=require("common/components/util/get-ie");$.fn.extend({editor:function(h){var c=$(this);if(c.is("textarea")){var g=c.data("editor");if("object"==typeof h&&!g){var g=new a(this,h);c.data("editor",g),g._bind()}if("string"==typeof h&&g&&g[h])return g[h].apply(g,Array.prototype.slice.call(arguments,1))}return this}}),$.fn.editor.defaults={autoSize:!1,onChange:null},a.prototype._bind=function(){var a,h=this;if(this.opts.onChange&&this.opts.autoSize)a=function(){h.opts.onChange.call(h.$textarea[0]),h._autoSize()};else if(this.opts.onChange)a=this.opts.onChange;else{if(!this.opts.autoSize)return;a=function(){h._autoSize()}}if(this._IE&&this._IE<9)this.$textarea.on("propertychange.editor",function(){"value"==window.event.propertyName&&a.call(this)});else if(this.$textarea.on("input.editor",a),9===this._IE){var c=function(){a.call(h.$textarea[0])};this.$textarea.on("focus.editor",function(){document.addEventListener("selectionchange",c,!1)}).on("blur.editor",function(){document.removeEventListener("selectionchange",c,!1)})}},a.prototype._autoSize=function(){var a=parseFloat(this.$textarea.css("max-height"));if(a&&a<=this.$textarea[0].scrollHeight)this.$textarea.css("overflow-y","auto");else{this.$textarea.css("overflow-y","hidden");var h=parseFloat(this.$textarea.css("padding-top")),c=parseFloat(this.$textarea.css("padding-bottom")),$=parseFloat(this.$textarea.css("min-height"));this.$textarea.height($).height(this.$textarea[0].scrollHeight-h-c)}},a.prototype.replaceEnter=function(){return this.trimText().replace(/\r\n|\r|\n/g,"<br />")},a.prototype.trimText=function(){return $.trim(this.$textarea.val())},a.prototype.destory=function(){return this._IE&&this._IE<9?this.$textarea.off("propertychange.editor"):(this.$textarea.off("input.editor"),9===this._IE&&this.$textarea.off("focus.editor").off("blur.editor")),this.$textarea}});
/*!common/components/artTemplate/template-helper.js*/
;define("common/components/artTemplate/template-helper",["require","exports","module","dep/artTemplate/dist/template"],function(require,exports,module){var a=require("dep/artTemplate/dist/template");a.config("escape",!1),a.helper("formatTime",function(a){var g=new Date(a.replace(/-/g,"../default.htm")),h=g.getFullYear(),c=g.getMonth()+1,M=g.getDate(),D=g.getHours(),b=g.getMinutes(),T=new Date;return h==T.getFullYear()&&c==T.getMonth()+1&&M==T.getDate()?(10>D?"0"+D:D)+":"+(10>b?"0"+b:b):h+"-"+(10>c?"0"+c:c)+"-"+(10>M?"0"+M:M)}),a.helper("formatTimeV2",function(a){var g=a.split("T"),h=g[0].substr(0,4),c=g[0].substr(4,2),M=g[0].substr(6,2),D=g[1].substr(0,2),b=g[1].substr(2,2),T=new Date;return h==T.getFullYear()&&c==T.getMonth()+1&&M==T.getDate()?D+":"+b:h+"-"+c+"-"+M}),a.helper("mathFloor",function(a){return Math.floor(parseFloat(a))}),a.helper("mathToFloat",function(a){return-1==a.indexOf(".")&&(a+=".0"),a}),a.helper("tjnoNoPager",function(a){return 10>a?"000"+a:"00"+a}),a.helper("tjnoWithPager",function(a,g){return(10>a?"0"+a:a)+(10>g?"0"+g:g)}),a.helper("formatText",function(a,g){return a.length>g?a.substr(0,g)+"...":a}),a.helper("subDateString",function(a,g){return a.length>g?a.substr(0,g):a}),a.helper("dateFormat",function(a,g){if("string"==typeof a){var h=a.match(/(\/Date\((\d+)\)\/)/);h&&h.length>=3&&(a=parseInt(h[2]))}if(a=new Date(a),!a||"Invalid Date"==a.toUTCString())return"";var c={M:a.getMonth()+1,d:a.getDate(),h:a.getHours(),m:a.getMinutes(),s:a.getSeconds(),q:Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};return g||(g="yyyy-MM-dd hh:mm:ss"),g=g.replace(/([yMdhmsqS])+/g,function(g,t){var h=c[t];return void 0!==h?(g.length>1&&(h="0"+h,h=h.substr(h.length-2)),h):"y"===t?(a.getFullYear()+"").substr(4-g.length):g})}),module.exports=a});
/*!common/components/requester/main.js*/
;define("common/components/requester/main",["require","exports","module","common/components/dialog/main"],function(require,exports,module){function a(a){c({width:500,title:"操作失败",body:'<div style="font-size:18px;">'+a+"</div>"})}var c=require("common/components/dialog/main"),b={type:"post",dataType:"json",error:function(c){a(c.message||"操作失败，请重试或联系拉勾网")}};module.exports=function(c){c=$.extend({},b,c);var v=c.success,y=c.error;c.success=function(c){switch(c.state){case 1:v&&v(c);break;case 304:a("当前页面过期或已退出登录，请刷新页面再进行此操作");break;case 330:a("你当前没有该操作权限，请更换其他有权限的帐号后重试");break;default:y&&y(c)}},$.ajax(c)}});
/*!common/components/atplPager/main.js*/
;define("common/components/atplPager/main",["require","exports","module","dep/artTemplate/dist/template"],function(require){var a=require("dep/artTemplate/dist/template");$.fn.extend({pager:function(c){function h(){c.firstRender?(c.loadingTpl&&S.html(a.compile(c.loadingTpl)(c.loadingData)),c.onRender(z,function(h){if(!h.listData.list.length)return void(c.emptyTpl&&S.html(a.compile(c.emptyTpl)(c.emptyData)));k=C(h.totalCount),b(h);var g=c.showMore;g.enable?($(R("{0}:nth-child(n + {1})",g.item,g.count+1)).hide(),S.append(R("<div class='showMore'>{0}</div>",g.text))):w()})):w(),g()}function g(){I.on("selectstart",".pages",function(a){a.preventDefault()}),I.on("click",".pages .number:not(.current)",function(){z=parseInt($(this).text()),T()}),I.on("click",".pages .prev:not(.disable)",function(){z-=1,T()}),I.on("click",".pages .next:not(.disable)",function(){z+=1,T()}),I.on("click",".pages .first:not(.disable)",function(){z=1,T()}),I.on("click",".pages .last:not(.disable)",function(){z=Math.ceil(k/c.pageSize),T()}),c.showMore.enable&&I.on("click",".list-content .showMore",function(){$(R("{0}:nth-child(n + {1})",c.showMore.item,c.showMore.count+1)).show(),$(this).hide(),w()})}function T(){D(),c.onRender(z,v)}function v(h){$(".pages").remove(),k=C(h.totalCount),h.pageIndex&&(z=h.pageIndex),h.listData.list.length?(b(h),w()):c.emptyTpl&&S.html(a.compile(c.emptyTpl)(c.emptyData))}function b(h){c.listTpl&&S.html(a.compile(c.listTpl)(h.listData))}function w(){var a=Math.ceil(k/c.pageSize);if(!c.hideOne||a>1){var h=y(a);I.append($(R("<div class='pages'>{0}</div>",h)))}}function y(a){var h=[],g=c.middleRange,T=Math.ceil(g/2);h.push(R("<span class='first{0}'>{1}</span>",1==z?" disable":"",c.firstText)),h.push(R("<span class='prev{0}'>{1}</span>",1==z?" disable":"",c.prevText));var v;g>=a?(v=1,end=a):(v=T>=z?1:z>a-T?a-g+1:z-T+1,end=v+g-1);for(var i=v;end>=i;i++)h.push(R("<span class='number{0}'>{1}</span>",z==i?" current":"",i));return h.push(R("<span class='next{0}'>{1}</span>",z==a?" disable":"",c.nextText)),h.push(R("<span class='last{0}'>{1}</span>",z==a?" disable":"",c.lastText)),h.join("")}function D(){if(c.anchorTo.target&&M(),c.loadingTpl){var h=S.height(),g=a.compile(c.loadingTpl)(c.loadingData),T=R("<div style='height:{0}px;'>{1}</div",h,g);S.html(T)}$(".pages").remove()}function M(){var a=$(c.anchorTo.target).offset().top+c.anchorTo.corrected;c.anchorTo.scroll?$("html, body").animate({scrollTop:a},c.anchorTo.speed):$(window).scrollTop(a)}function C(a){return"number"==typeof c.maxTotalCount&&c.maxTotalCount?Math.min(a,c.maxTotalCount):a}function R(a){for(var c=a,i=1;i<=arguments.length;i++)if(void 0!=arguments[i]){var h=new RegExp("({)"+(i-1)+"(})","g");c=c.replace(h,arguments[i])}return c}c=$.extend(!0,{},$.fn.pager.defaults,c);var k=C(c.totalCount),z=1,I=$(this),S=I.find(".list-content").length?I.find(".list-content").eq(0):$("<div class='list-content'></div>").appendTo(I);return h(),{render:v,loading:D}}}),$.fn.pager.defaults={totalCount:0,maxTotalCount:0/0,pageSize:0,firstRender:!1,middleRange:5,hideOne:!0,prevText:"上一页",nextText:"下一页",firstText:"首页",lastText:"尾页",listTpl:"",listData:{list:[]},emptyTpl:"",emptyData:{},loadingTpl:"",loadingData:{},onRender:null,anchorTo:{target:null,corrected:0,scroll:!1,speed:500},showMore:{enable:!1,item:null,count:1,text:"展示更多"}}});
/*!company-c/modules/common/config.js*/
;define("company-c/modules/common/config",["require","exports","module"],function(require,exports,module){module.exports={url:{searchInterviewExperiences:GLOBAL_DOMAIN.ctx+"/gongsi/searchInterviewExperiences.json",usefulCount:GLOBAL_DOMAIN.ctx+"/mycenter/incrInterviewExperienceUsefulCount.json",getPositionList:GLOBAL_DOMAIN.ctx+"/gongsi/searchPosition.json",attentionQuestion:GLOBAL_DOMAIN.zctx+"/attention/attentionQuestion.json",cancelAttentionQuestion:GLOBAL_DOMAIN.zctx+"/attention/cancelAttentionQuestion.json",followTopic:GLOBAL_DOMAIN.zctx+"/attention/attentionTopic.json",cancelFollwTopic:GLOBAL_DOMAIN.zctx+"/attention/cancelAttentionTopic.json",searchQuestions:GLOBAL_DOMAIN.ctx+"/gongsi/searchQuestions.json",moreCompanyReports:GLOBAL_DOMAIN.ctx+"/gongsi/moreCompanyReports.json"}}});
/*!dep/jquery_lazyload/jquery.lazyload.js*/
;define("dep/jquery_lazyload/jquery.lazyload",["require","exports","module"],function(){!function(a,h,c,A){var g=a(h);a.fn.lazyload=function(v){function b(){var h=0;_.each(function(){var c=a(this);if(!y.skip_invisible||c.is(":visible"))if(a.abovethetop(this,y)||a.leftofbegin(this,y));else if(a.belowthefold(this,y)||a.rightoffold(this,y)){if(++h>y.failure_limit)return!1}else c.trigger("appear"),h=0})}var w,_=this,y={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:h,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return v&&(A!==v.failurelimit&&(v.failure_limit=v.failurelimit,delete v.failurelimit),A!==v.effectspeed&&(v.effect_speed=v.effectspeed,delete v.effectspeed),a.extend(y,v)),w=y.container===A||y.container===h?g:a(y.container),0===y.event.indexOf("scroll")&&w.bind(y.event,function(){return b()}),this.each(function(){var h=this,c=a(h);h.loaded=!1,(c.attr("src")===A||c.attr("src")===!1)&&c.is("img")&&c.attr("src",y.placeholder),c.one("appear",function(){if(!this.loaded){if(y.appear){var A=_.length;y.appear.call(h,A,y)}a("<img />").bind("load",function(){var A=c.attr("data-"+y.data_attribute);c.hide(),c.is("img")?c.attr("src",A):c.css("background-image","url('"+A+"')"),c[y.effect](y.effect_speed),h.loaded=!0;var g=a.grep(_,function(a){return!a.loaded});if(_=a(g),y.load){var v=_.length;y.load.call(h,v,y)}}).attr("src",c.attr("data-"+y.data_attribute))}}),0!==y.event.indexOf("scroll")&&c.bind(y.event,function(){h.loaded||c.trigger("appear")})}),g.bind("resize",function(){b()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&g.bind("pageshow",function(h){h.originalEvent&&h.originalEvent.persisted&&_.each(function(){a(this).trigger("appear")})}),a(c).ready(function(){b()}),this},a.belowthefold=function(c,v){var b;return b=v.container===A||v.container===h?(h.innerHeight?h.innerHeight:g.height())+g.scrollTop():a(v.container).offset().top+a(v.container).height(),b<=a(c).offset().top-v.threshold},a.rightoffold=function(c,v){var b;return b=v.container===A||v.container===h?g.width()+g.scrollLeft():a(v.container).offset().left+a(v.container).width(),b<=a(c).offset().left-v.threshold},a.abovethetop=function(c,v){var b;return b=v.container===A||v.container===h?g.scrollTop():a(v.container).offset().top,b>=a(c).offset().top+v.threshold+a(c).height()},a.leftofbegin=function(c,v){var b;return b=v.container===A||v.container===h?g.scrollLeft():a(v.container).offset().left,b>=a(c).offset().left+v.threshold+a(c).width()},a.inviewport=function(h,c){return!(a.rightoffold(h,c)||a.leftofbegin(h,c)||a.belowthefold(h,c)||a.abovethetop(h,c))},a.extend(a.expr[":"],{"below-the-fold":function(h){return a.belowthefold(h,{threshold:0})},"above-the-top":function(h){return!a.belowthefold(h,{threshold:0})},"right-of-screen":function(h){return a.rightoffold(h,{threshold:0})},"left-of-screen":function(h){return!a.rightoffold(h,{threshold:0})},"in-viewport":function(h){return a.inviewport(h,{threshold:0})},"above-the-fold":function(h){return!a.belowthefold(h,{threshold:0})},"right-of-fold":function(h){return a.rightoffold(h,{threshold:0})},"left-of-fold":function(h){return!a.rightoffold(h,{threshold:0})}})}(jQuery,window,document)});
/*!company-c/modules/reviews/main.js*/
;define("company-c/modules/reviews/main",["require","exports","module","common/components/util/get-ie","common/components/dialog/main","dep/jquery-placeholder/jquery-placeholder-2.3.0/jquery.placeholder","dep/artTemplate/dist/template","common/components/editor/main","common/components/artTemplate/template-helper","common/components/requester/main","common/components/atplPager/main","company-c/modules/common/config","dep/jquery_lazyload/jquery.lazyload"],function(require){function a(a){return a.replace(/<\/?[^>]*>/g,"")}function c(a,c){R.getList({companyId:global.companyId,positionType:z,pageSize:10,pageNo:a},function(v){var h=v.content.data.page;N=h,setTimeout(function(){c({totalCount:h.totalCount,listData:{ctx:GLOBAL_DOMAIN.ctx,lgsctx:GLOBAL_DOMAIN.lgsctx,list:h.result,stars:[1,2,3,4,5]},pageIndex:a}),w(h.result,".star_rank_zhpf")},500)})}function v(a,c){var v=a,w=$(c);w.css("width",24.5*v+2+"px"),v>0&&1>=v?w.css("background-position","-1px 0"):v>1&&3>=v?w.css("background-position","-1px -24px"):v>3&&5>=v?w.css("background-position","-1px -48px"):w.css("background-image","none")}function w(a,c){var v=a,w=$(c);if(v instanceof Array)for(var i=0;i<v.length;i++)v[i].comprehensiveScore>0&&v[i].comprehensiveScore<=1?w.eq(i).css({"background-position":"-1px 0",width:22*v[i].comprehensiveScore+"px"}):v[i].comprehensiveScore>1&&v[i].comprehensiveScore<=3?w.eq(i).css({"background-position":"-1px -20px",width:22*v[i].comprehensiveScore+"px"}):v[i].comprehensiveScore>3&&v[i].comprehensiveScore<=5?w.eq(i).css({"background-position":"-1px -40px",width:22*v[i].comprehensiveScore+"px"}):w.eq(i).css("background-image","none");else w.css("width",22*v+"px"),v>0&&1>=v?w.css("background-position","-1px 0"):v>1&&3>=v?w.css("background-position","-1px -20px"):v>3&&5>=v?w.css("background-position","-1px -40px"):w.css("background-image","none")}function h(a,c){var v='<span class="review-type">[面试过程]</span>',w='<span class="review-type">[其他评价]</span>',h='<div class="interview-process">$</div>',y='<div class="other-review">$</div>',b='<a href="javascript:;" class="up"><span>收起</span><i></i></a>';return""==c?"<div>"+v+h.replace("$",a)+b+"</div>":"<div>"+v+h.replace("$",a)+"</div><div>"+w+y.replace("$",c)+b+"</div>"}function y(c,v){c=a(c),v=a(v);var w='<span class="review-type">[面试过程]</span>',h='<span class="review-type">[其他评价]</span>',y='<div class="interview-process">$</div>',b='<div class="other-review">$</div>',g='...<a href="javascript:;" class="down"><span>展开</span><i></i></a>';return""==v?c.length<=194?"<div>"+w+y.replace("$",c)+"</div>":"<div>"+w+y.replace("$",c.substr(0,194))+g+"</div>":c.length+v.length<=188?"<div>"+w+y.replace("$",c)+"</div><div>"+h+b.replace("$",v)+"</div>":c.length>188?"<div>"+w+y.replace("$",c.substr(0,194))+g+"</div>":"<div>"+w+y.replace("$",c)+"</div><div>"+h+b.replace("$",v.substr(0,188-c.length))+g+"</div>"}function b(a){var c='<a href="javascript:;" class="up"><span>收起</span><i></i></a>';return a+c}function g(c){c=a(c);var v='...<a href="javascript:;" class="down"><span>展开</span><i></i></a>';return c.length>200?c.substr(0,200)+v:c}function E(){S({width:500,title:"回复提交",body:'<div style="font-size:18px;text-align:center;">回复提交中...</div>',loading:!0});var a=$(".review-reply.reply-choosen"),c=a.parent().find(".reply").data("id"),v=a.children("textarea").editor("replaceEnter");R.saveReply({interviewExperienceId:c,content:v},function(c){var v=c.content.data.data;a.children("textarea").editor("destory"),a.html(j.compile(A.showReply)({interviewExperience:{reply:v},ctx:GLOBAL_DOMAIN.ctx,lgsctx:GLOBAL_DOMAIN.lgsctx})),a.prev().find(".reply").replaceWith('<span class="replied">企业回复</span>'),$.colorbox.close();var w=a.parents(".review-area").index();N.result[w].reply=v},function(c){var v=c.message?c.message:"提交失败，请重试，或通过页面底部联系我们";a.find(".error").text(v).show(),$.colorbox.close()})}function k(a){var c=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;return c.test(a)}var _=require("common/components/util/get-ie").getIE,S=require("common/components/dialog/main");require("dep/jquery-placeholder/jquery-placeholder-2.3.0/jquery.placeholder");var j=require("dep/artTemplate/dist/template");require("common/components/editor/main"),require("common/components/artTemplate/template-helper");var T=require("common/components/requester/main"),I=require("common/components/atplPager/main"),C=require("company-c/modules/common/config");require("dep/jquery_lazyload/jquery.lazyload"),$("img.lazy_img").lazyload({placeholder:"../../https@www.lgstatic.com/www/static/company-c/modules/reviews/img/avatar_default_5F25a41f6.png"}),j.helper("foldReview",y),j.helper("foldReply",g);var N=global.interviewExperiences,O="",A={list:'{{each list as interviewExperience i}}\n<li class="review-area clearfix">\n	<div class="review-avater">\n		<img alt="评价人头像" src="{{lgsctx}}/thumbnail_100x100/{{interviewExperience.portrait}}" />\n	</div>\n	<div class="review-right">\n		<div class="review-stars clearfix">\n			{{if interviewExperience.isAnonymous}}\n				<span class="review-name">匿名</span>\n			{{else}}\n				<a class="review-name" title="{{interviewExperience.username}}">\n					{{interviewExperience.username.substr(0, 3)}}\n				</a>\n			{{/if}}\n			<span class="title">综合评分&nbsp;&nbsp;:&nbsp;&nbsp;</span>\n			<div class="stars">\n				<div class="stars-static_s">\n                    <span class="star_rank_zhpf"></span>\n                </div>\n				{{if interviewExperience.describeScore > 0}}\n				<div class="score-detail">\n					<div class="triangleOut"></div>\n					<div class="triangleIn"></div>\n					<ul>\n						<li class="clearfix">\n							<span class="title">描述相符</span>\n							<span>&nbsp;&nbsp;:&nbsp;&nbsp;</span>\n							<div class="tip-stars">\n								{{each stars as score i}}\n									<i class="star{{if i + 1 <= interviewExperience.describeScore}} star-{{interviewExperience.describeScore}}{{/if}}"></i>\n								{{/each}}\n							</div>\n							<span class="score">{{interviewExperience.describeScore | mathToFloat}}</span>\n						</li>\n						<li class="clearfix">\n							<span class="title">面试官</span>\n							<span>&nbsp;&nbsp;:&nbsp;&nbsp;</span>\n							<div class="tip-stars">\n								{{each stars as score i}}\n									<i class="star{{if i + 1 <= interviewExperience.interviewerScore}} star-{{interviewExperience.interviewerScore}}{{/if}}"></i>\n								{{/each}}\n							</div>\n							<span class="score">{{interviewExperience.interviewerScore | mathToFloat}}</span>\n						</li>\n						<li class="clearfix">\n							<span class="title">公司环境</span>\n							<span>&nbsp;&nbsp;:&nbsp;&nbsp;</span>\n							<div class="tip-stars">\n								{{each stars as score i}}\n									<i class="star{{if i + 1 <= interviewExperience.companyScore}} star-{{interviewExperience.companyScore}}{{/if}}"></i>\n								{{/each}}\n							</div>\n							<span class="score">{{interviewExperience.companyScore | mathToFloat}}</span>\n						</li>\n					</ul>\n				</div>\n				{{/if}}\n			</div>\n			<span class="title">面试职位&nbsp;&nbsp;:&nbsp;&nbsp;</span>\n			{{if interviewExperience.positionStatus}}\n				{{if interviewExperience.positionStatus == 1}}\n					<a target="_blank" class="job-name" href="{{ctx}}/jobs/{{interviewExperience.positionId}}.html" title="{{interviewExperience.positionName}}" data-index="{{i}}">{{interviewExperience.positionName}}</a>\n					<span class="job-status">（&nbsp;已下线&nbsp;）</span>\n				{{else}}\n					<a class="job-name disable" title="{{interviewExperience.positionName}}">{{interviewExperience.positionName}}</a>\n					<span class="job-status">（&nbsp;已删除&nbsp;）</span>\n				{{/if}}\n			{{else}}\n				<a target="_blank" class="job-name" href="{{ctx}}/jobs/{{interviewExperience.positionId}}.html" title="{{interviewExperience.positionName}}" data-index="{{i}}">{{interviewExperience.positionName}}</a>\n			{{/if}}\n			<span class="review-date">{{interviewExperience.createTime | formatTime}}</span>\n		</div>\n		<div class="review-tags clearfix">\n			{{each interviewExperience.tagArray as tag}}\n				<div class="tag">{{tag}}</div>\n			{{/each}}\n		</div>\n		<div class="review-content">\n			{{interviewExperience.content | foldReview: interviewExperience.evaluation}}\n		</div>\n		<div class="review-action">\n			{{if interviewExperience.reply}}\n				<span class="replied">企业回复</span>\n				<a href="javascript:;" class="useful no_select" style="padding-left: 10px;" data-id="{{interviewExperience.id}}">有用&nbsp;(&nbsp;<span>{{interviewExperience.usefulCount}}</span>&nbsp;)<i></i></a>\n			{{else}}\n				<a href="javascript:;" class="useful no_select" data-id="{{interviewExperience.id}}">有用&nbsp;(&nbsp;<span>{{interviewExperience.usefulCount}}</span>&nbsp;)<i></i></a>\n			{{/if}}\n		</div>\n		<div class="review-reply" data-index="{{i}}">\n		{{if interviewExperience.reply}}\n			<div class="triangleOut"></div>\n			<div class="triangleIn"></div>\n			<div class="reply-area">\n				<img alt="评价回复人头像" src="{{lgsctx}}/thumbnail_100x100/{{interviewExperience.reply.portrait}}" />\n				<div class="reply-right">\n					<span class="reply-date">{{interviewExperience.reply.createTime | formatTime}}</span>\n			        <div class="reply-info">\n			            <span>{{interviewExperience.reply.companyName}}</span>\n			            &nbsp;·&nbsp;\n			            <span>{{interviewExperience.reply.username}}</span>\n			            {{if interviewExperience.reply.positionName}}\n			            &nbsp;·&nbsp;\n			            <span>{{interviewExperience.reply.positionName}}</span>\n			            {{/if}}\n			        </div>\n			        <div class="reply-content">\n			        	{{interviewExperience.reply.content | foldReply}}\n			        </div>\n				</div>\n			</div>\n		{{/if}}\n		</div>\n	</div>\n</li>\n{{/each}}\n\n',empty:'<div class="list-empty">\n    <i></i>\n    <span>当前没有符合条件的面试评价</span>\n</div>',loading:'<div class="list-loading"></div>'},R={getList:function(a,c){T({url:C.url.searchInterviewExperiences,data:a,success:c})},useful:function(a,c,v){PASSPORT.util.rpc({url:C.url.usefulCount,params:a,succ:function(a){1==a.state?c(a):v(a)},fail:v})},saveReply:function(a,c,v){PASSPORT.util.rpc({url:GLOBAL_DOMAIN.crctx+"/gongsi/createInterviewExperienceReply.json",params:a,succ:function(a){1==a.state?c(a):v(a)},fail:v})}},z="",I=$(".list-container").pager({totalCount:N.totalCount,pageSize:10,listTpl:A.list,emptyTpl:A.empty,loadingTpl:A.loading,onRender:function(a,v){c(a,v)},anchorTo:{target:".reviews-filter",corrected:-30}}),L=$(".reviews-filter");L.on("click","span:not(.filter-selected)",function(){L.children("span.filter-selected").removeClass("filter-selected"),z=$(this).addClass("filter-selected").text(),z="全部"==z?"":z,I.loading(),c(1,I.render)}),v(global.comprehensiveScore,".star_rank"),w(global.describeScore,".star_rank_ms"),w(global.interviewerScore,".star_rank_msg"),w(global.companyScore,".star_rank_hj"),w(global.interviewExperiences.result,".star_rank_zhpf"),$(".reviews-area").on("click",".review-content .down",function(){var a=$(this).parents(".review-content"),c=a.index(".review-content"),v=N.result[c];a.html(h(v.content,v.evaluation))}),$(".reviews-area").on("click",".review-content .up",function(){var a=$(this).parents(".review-content"),c=a.index(".review-content"),v=N.result[c];a.html(y(v.content,v.evaluation))}),$(".reviews-area").on("click",".reply-content .down",function(){var a=$(this).parent(),c=$(this).parents(".review-area").index(".review-area"),v=N.result[c];a.html(b(v.reply.content))}),$(".reviews-area").on("click",".reply-content .up",function(){var a=$(this).parent(),c=$(this).parents(".review-area").index(".review-area"),v=N.result[c],v=N.result[c];a.html(g(v.reply.content))}),$(".reviews-area").on("click",".useful:not(.disable):not(.requesting)",function(){var a=$(this);a.addClass("requesting"),R.useful({interviewExperienceId:a.data("id")},function(){var c=a.children("span"),v=parseInt(c.text());c.text(++v),a.removeClass("requesting")},function(c){a.children("i").text(c.message||"程序异常").stop().fadeIn(200).delay(1500).fadeOut(200),a.removeClass("requesting")})}),$(".reviews-area").on("click",".job-name:not(.disable)",function(e){e.preventDefault();var a=$(this).data("index"),c=$(this).prop("href");window.open(c+"@source=reviews_pos&i=reviews_pos-"+a)});var A={newReply:'<div class="triangleOut-editor"></div>\n<div class="triangleIn-editor"></div>\n<textarea class="reply-editor" placeholder="您的回复将会展示在您的公司主页及相应职位页下方">\n</textarea>\n<div class="text-count">还可输入&nbsp;<span>300</span>&nbsp;字</div>\n<input type="button" value="提交" class="saveBtn" />\n<input type="button" value="取消" class="cancelBtn" />\n</div>\n<br /><span class="error"></span>\n\n',showReply:'<div class="triangleOut"></div>\n<div class="triangleIn"></div>\n<div class="reply-area">\n    <img alt="评价回复人头像" src="{{lgsctx}}/{{interviewExperience.reply.portrait}}" />\n    <div class="reply-right">\n        <span class="reply-date">{{interviewExperience.reply.createTime | formatTimeV2}}</span>\n        <div class="reply-info">\n            <span>{{interviewExperience.reply.companyName}}</span>\n            &nbsp;·&nbsp;\n            <span>{{interviewExperience.reply.username}}</span>\n            {{if interviewExperience.reply.positionName}}\n            &nbsp;·&nbsp;\n            <span>{{interviewExperience.reply.positionName}}</span>\n            {{/if}}\n        </div>\n        <div class="reply-content">\n            {{interviewExperience.reply.content | foldReply}}\n        </div>\n    </div>\n</div>\n'};$("body").on("focus",".reply-editor",function(){$(this).parent().addClass("reply-active"),$(this).siblings(".error").hide()}).on("blur",".reply-editor",function(){$(this).parent().removeClass("reply-active")}),$(".reviews-area").on("click",".reply:not(.replying)",function(){var a=$(this),c=a.parent().next();c.html(j.compile(A.newReply)({}));var v=c.children("textarea"),w=a.parents(".review-right").children(".review-reply").children(".error");v.editor({onChange:function(){var a,c=$.trim($(this).val()),v=c.length;a=300>=v?"还可输入&nbsp;<span>"+(300-v)+"</span>&nbsp;字":"已经超出&nbsp;<span>"+(v-300)+"</span>&nbsp;字",k(c)?(w.html("暂不支持输入表情"),w.show()):w.hide(),$(this).next().html(a)}});var h=_();h&&9>=h&&v.focus().blur().placeholder(),a.addClass("replying").text("取消回复")}),$(".reviews-area").on("click",".reply.replying",function(){var a=$(this),c=a.parent().next();c.children("textarea").editor("destory"),c.empty(),a.removeClass("replying").text("回复")}),$(".reviews-area").on("click",".cancelBtn",function(){$(this).parent().prev().children(".reply.replying").click()}),$(".reviews-area").on("click",".saveBtn",function(){$(".review-reply").removeClass("reply-choosen"),$(this).parents(".review-reply").addClass("reply-choosen");var a=$(this).parent(),c=a.find("textarea"),v=c.editor("trimText"),w=a.children(".error");return""===v?void w.text("请填写回复内容").show():v.length>300?void w.text("请输入300字以内的回复内容").show():k(v)?void w.text("暂不支持输入表情").show():(O=c.editor("replaceEnter"),void S({width:500,title:"提交确认",body:'<div style="font-size:18px;text-align:center;">提交后无法修改，是否确认提交？</div>',okBtn:{has:!0,text:"确认提交",onClick:E},cancelBtn:{has:!0,text:"继续编辑"}}))})});